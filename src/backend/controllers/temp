async searchApi(req, res) {
    if (token === undefined)
      const token = await getSpotifyToken(CLIENTID, CLIENTSECRET); // Obtient le jeton d'accÃ¨s
    const url = `https://api.spotify.com/v1/search?q=${encodeURIComponent(
        songName
      )}&type=track&market=FR&limit=5`;
    const requestOptions = {
    method: 'GET',
    headers: {
      Authorization: `Bearer ${token}`,
      'Content-Type': 'application/json',
    },
    const response = await fetch(url, requestOptions);
    const results = await response.json();
    res.status(200).json({ results });
}

getSpotifyToken(clientID, clientSecret) {
    const url = 'https://accounts.spotify.com/api/token';
    const basicAuth =
      'Basic ' + Buffer.from(clientID + ':' + clientSecret).toString('base64');
    const formData = new URLSearchParams();
    formData.append('grant_type', 'client_credentials');
    const requestOptions = {
      method: 'POST',
      headers: {
        Authorization: basicAuth,
      },
      body: formData,
    };

    return fetch(url, requestOptions)
      .then((response) => {
          return response.json();
      })
      .then((data) => {
        return data.access_token;
      })
      .catch((error) => {
        console.error('Error !!! :', error);
      });
}

